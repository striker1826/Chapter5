# We-Are-One

### 1) 소개
항해 99 9기 E반 5주차 14조 블로그 백엔드 서버입니다.  
팀원: 김민섭, 백지영

### 2) 진행 기간: 2022년 10월 14일 ~ 10월 20일
- 10월 14일: S.A 작성, DB 설계, API 설계, 회원가입, 로그인 기능 완성
- 10월 15일: 게시글 CRUD 완성
- 10월 16일: 댓글, 대댓글 CRUD, 회원 CRUD, 좋아요 기능 완성
- 10월 17일: 기능 테스트, 요구사항 반영 안된 것 수정
- 10월 18일: 테스트 코드 작성,  코드리뷰
- 10월 19일: 배포 전 오류 수정 및 보충 작업, 배포
- 10월 20일: README 작성, 테스트 코드 추가 작성

### 3) 사용 기술
- 서버: javascript, express
- API 명세: swagger
- DB: mysql, sequelize
- 배포: AWS EC2

### 4) ERD
![image](https://user-images.githubusercontent.com/98001726/196906190-c392cd24-0372-4752-81c6-737420ecda44.png)


### 5) 주요 기능 요약
(1) 회원 가입
- 아이디, 비밀번호가 정해진 조건에 맞지 않는 경우 에러 메세지를 response에 포함시킨다.
- 비밀번호는 암호화 되어 데이터베이스에 저장돼야 한다.
- 회원에 동일한 아이디가 있을 시 "이미 존재하는 아이디입니다."라는 에러 메세지를 response에 포함시킨다.


(2) 로그인
- 받은 비밀번호를 암호화하여 데이터베이스에 있는 비밀번호와 비교한다.
- 로그인시 jwt(json web token) 발급해준다.


(3) 로그인 검사
- 로그인이 필요한 API를 호출한 경우 로그인 토큰을 전달한 경우만 정상 response를 전달받을 수 있도록 한다.
- 로그인 토큰을 전달하지 않은 채로 로그인 API를 호출한 경우 "로그인이 필요합니다."라는 에러 메세지를 response에 포함시킨다.
- 로그인 토큰을 전달한 채로 로그인 API 또는 회원가입 API를 호출한 경우 "이미 로그인이 되어있습니다"라는 에러 메세지를 response에 포함시킨다.


(4) 게시글
- 각 게시글의 작성자만 수정, 삭제할 수 있다.
- 없는 게시글을 수정, 삭제하려는 경우 잘못된 접근이라는 에러 메세지를 response에 포함시킨다.
- 게시글 상세 조회 호출시 response에 댓글과 대댓글을 포함시킨다.
- 각 댓글의 childComment 속성에 해당 댓글의 대댓글들을 담겨있는 배열이 있다.


(5) 댓글/대댓글
- 댓글과 대댓글은 DB에 하나의 테이블에 같이 저장된다. (level값과 commentNum의 유무에 따라 구분)
- level이 1이면 댓글, level이 2이면 대댓글
- 댓글 작성, 수정 시 level이 1이나 2가 아니면 "잘못된 접근입니다."라는 에러 메세지를 response에 포함시킨다.
- 댓글 삭제시 해당 댓글의 대댓글도 같이 삭제된다.


(6) 좋아요
- 사용자는 좋아요와 좋아요 취소를 할 수 있다.
- API호출시 게시글 테이블의 "게시글 좋아요 수(likes)"에 결과를 반영시킨다.
    (좋아요 - 1증가, 좋아요 취소 - 1감소)
- 사용자는 자신이 좋아요한 게시글들을 최근 좋아요를 한 순으로 모아볼 수 있다.